<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Personalized Fitness Generator</title>

<style>
/* (YOUR ORIGINAL STYLE UNCHANGED ‚Äî omitted here for length, but preserved exactly as you sent it) */
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

</head>
<body>

<!-- (YOUR ORIGINAL HTML UNCHANGED) -->

<script>

// ------------------------------------------
// ADDED ‚Äî Exercise ‚Üí YouTube tutorial links
// ------------------------------------------
const tutorialLinks = {
    "Push (Chest, Shoulders, Triceps)": "https://www.youtube.com/watch?v=_l3ySVKYVJ8",
    "Pull (Back, Biceps, Traps)": "https://www.youtube.com/watch?v=op9kVnSso6Q",
    "Legs (Quads, Hams, Calves)": "https://www.youtube.com/watch?v=aclHkVaku9U",
    "Upper Body (Strength)": "https://www.youtube.com/watch?v=rT7DgCr-3pg",
    "Lower Body (Strength)": "https://www.youtube.com/watch?v=1uDiW5--rAE",
    "Upper Body (Hypertrophy)": "https://www.youtube.com/watch?v=B-aVuyhvLHU",
    "Lower Body (Hypertrophy)": "https://www.youtube.com/watch?v=QOVaa0jHTn4",
    "Full Body Circuit": "https://www.youtube.com/watch?v=ml6cT4AZdqI",
    "Steady-State Cardio": "https://www.youtube.com/watch?v=fcN37TxBE_s",
    "Core & Endurance": "https://www.youtube.com/watch?v=pSHjTRCQxIw",
    "Mobility & Posture": "https://www.youtube.com/watch?v=k4yvmUu0Jx0",
    "Light Resistance": "https://www.youtube.com/watch?v=IODxDxX7oi4",
    "Yoga/Stretching": "https://www.youtube.com/watch?v=v7AYKMP6rOE"
};

// ------------------------------------------
// YOUR ORIGINAL CODE STARTS (unchanged)
// ------------------------------------------

document.getElementById('theme-toggle').addEventListener('change', function() {
    document.body.classList.toggle('dark-mode', this.checked);
});

document.getElementById('fitnessForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const objective = document.getElementById('objective').value;
    const frequency = parseInt(document.getElementById('frequency').value);

    let tableHTML = '<h2>Your Personalized 4-Week Training Program</h2>';
    tableHTML += `<p><strong>Objective:</strong> ${document.querySelector('#objective option:checked').textContent} | <strong>Training Days Per Week:</strong> ${frequency}</p>`;
    tableHTML += '<div id="printableWorkout">';
    tableHTML += '<table class="workout-table">';
    tableHTML += '<thead><tr><th>Week Day</th><th>Target Muscle/Activity</th><th>Sets x Reps</th><th>Notes/Focus</th></tr></thead>';
    tableHTML += '<tbody>';

    const workoutRoutines = {
        /* (UNCHANGED ‚Äî your large routine object) */
    };

    const trainingPlan = workoutRoutines[objective][frequency] ||
        workoutRoutines[objective][3] || [
        { day: 'N/A', target: 'Rest Day / Activity', setsReps: 'N/A', notes: 'Workout plan could not be generated.' }
    ];

    for (let week = 1; week <= 4; week++) {
        tableHTML += `<tr><td colspan="4" class="week-header">üî• WEEK ${week}: Base Building / Progressive Overload Focus</td></tr>`;
        for (let i = 0; i < trainingPlan.length; i++) {
            const workout = trainingPlan[i];
            tableHTML += `
                <tr>
                    <td>${workout.day}</td>
                    <td><strong>${workout.target}</strong></td>
                    <td>${workout.setsReps}</td>
                    <td>${workout.notes}</td>
                </tr>`;
        }

        const restDays = 7 - trainingPlan.length;
        if (restDays > 0) {
            tableHTML += `
                <tr>
                    <td>Rest Days (${restDays} days)</td>
                    <td>Recovery & Active Rest</td>
                    <td>N/A</td>
                    <td>Walk, stretch, hydrate, sleep.</td>
                </tr>`;
        }
    }

    tableHTML += '</tbody></table>';
    tableHTML += '</div>';

    tableHTML += `
        <div class="print-download-buttons">
            <button onclick="window.print()" style="background-color: #337ab7;">üñ®Ô∏è Print Workout</button>
            <button id="downloadPdfButton" style="background-color: #d9534f;">‚¨áÔ∏è Download PDF</button>
        </div>
    `;

    document.getElementById('workoutTableContainer').innerHTML = tableHTML;

    document.getElementById('downloadPdfButton').addEventListener('click', function() {

        // ---------------------------------------------------------
        // ADDED ‚Äî Insert YouTube tutorial links before PDF creation
        // ---------------------------------------------------------
        document.querySelectorAll("td:nth-child(2)").forEach(td => {
            const exerciseName = td.textContent.trim();
            if (tutorialLinks[exerciseName]) {
                const link = document.createElement("div");
                link.innerHTML = `<small>üé• Tutorial: <a href="${tutorialLinks[exerciseName]}" target="_blank">${tutorialLinks[exerciseName]}</a></small>`;
                link.style.marginTop = "4px";
                td.appendChild(link);
            }
        });
        // ---------------------------------------------------------

        const element = document.getElementById('printableWorkout');
        const { jsPDF } = window.jspdf;

        html2canvas(element, { scale: 2, useCORS: true, logging: false }).then(canvas => {
            const imgData = canvas.toDataURL('image/png');
            const pdf = new jsPDF('p', 'mm', 'a4');
            const pdfWidth = pdf.internal.pageSize.getWidth();
            const imgProps = pdf.getImageProperties(imgData);
            const imgHeight = (imgProps.height * pdfWidth) / imgProps.width;

            pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, imgHeight);
            pdf.save('4-Week-Fitness-Plan.pdf');
        });
    });

});

</script>
</body>
</html>
