<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personalized Fitness Generator</title>
    <style>
        /* (YOUR ORIGINAL CSS ‚Äî UNCHANGED) */
    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <!-- (YOUR ORIGINAL HTML ‚Äî UNCHANGED) -->
    
<script>

// >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
// >>> ADDED FOR YOUTUBE TUTORIAL LINKS (NO OTHER CODE CHANGED) <<<<
// >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

const exerciseVideos = {
    "Bench Press": "https://youtu.be/gRVjAtPip0Y",
    "Overhead Press": "https://youtu.be/2yjwXTZQDDI",
    "Tricep Extension": "https://youtu.be/vB5OHsJ3EME",
    "Barbell Rows": "https://youtu.be/vT2GjY_Umpw",
    "Lat Pulldowns": "https://youtu.be/CAwf7n6Luuc",
    "Bicep Curls": "https://youtu.be/ykJmrZ5v0Oo",
    "Squats": "https://youtu.be/aclHkVaku9U",
    "Leg Press": "https://youtu.be/IZxyjW7MPJQ",
    "Romanian Deadlifts": "https://youtu.be/2SHsk9AzdjA",
    "Lunges": "https://youtu.be/QOVaaJDY9Ak",
    "Leg Extensions": "https://youtu.be/yRaqc-zQ52E",
    "Burpees": "https://youtu.be/dZgVxmf6jkA",
    "Push-ups": "https://youtu.be/_l3ySVKYVJ8",
    "Mountain Climbers": "https://youtu.be/cnyTQDSE884",
    "Russian Twists": "https://youtu.be/wkD8rjkodUI",
    "Planks": "https://youtu.be/pSHjTRCQxIw",
    "Cat-Cow": "https://youtu.be/kqnua4rHVVA",
    "Bird-Dog": "https://youtu.be/I9ZJj-juNLQ",
    "Thoracic Rotations": "https://youtu.be/_xZ6x7Sg_iI",
    "Resistance Band Pull-aparts": "https://youtu.be/1u1w7PxR1pA",
    "Step-ups": "https://youtu.be/VHyGqsPOUHs",
    "Downward Dog": "https://youtu.be/6pSH3QkqI7M"
};

// >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
// >>> END OF ADDED TUTORIAL-LINK SECTION <<<<<<<<<<<<<<<<<<<<<<<<<<<
// >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>



document.getElementById('theme-toggle').addEventListener('change', function() {
    document.body.classList.toggle('dark-mode', this.checked);
});


// --- ORIGINAL EVENT LISTENER START (UNCHANGED) ---
document.getElementById('fitnessForm').addEventListener('submit', function(event) {
    event.preventDefault(); 
    
    const objective = document.getElementById('objective').value;
    const frequency = parseInt(document.getElementById('frequency').value);
    
    let tableHTML = '<h2>Your Personalized 4-Week Training Program</h2>';
    tableHTML += `<p><strong>Objective:</strong> ${document.querySelector('#objective option:checked').textContent} | <strong>Training Days Per Week:</strong> ${frequency}</p>`;
    
    tableHTML += '<div id="printableWorkout">';
    tableHTML += '<table class="workout-table">';
    tableHTML += '<thead><tr><th>Week Day</th><th>Target Muscle/Activity</th><th>Sets x Reps</th><th>Notes/Focus</th></tr></thead>';
    tableHTML += '<tbody>';

    // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    // >>> ADDED LIST TO TRACK EXERCISES USED <<<
    // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    let exerciseList = new Set();


    // (YOUR ORIGINAL WORKOUT ROUTINES OBJECT ‚Äî UNCHANGED)


    const trainingPlan = workoutRoutines[objective][frequency] || workoutRoutines[objective][3] || [
        { day: 'N/A', target: 'Rest Day / Activity', setsReps: 'N/A', notes: 'Workout plan could not be generated for this frequency.' }
    ];

    for (let week = 1; week <= 4; week++) {
        tableHTML += `<tr><td colspan="4" class="week-header">üî• WEEK ${week}: Base Building / Progressive Overload Focus</td></tr>`;

        for (let i = 0; i < trainingPlan.length; i++) {
            const workout = trainingPlan[i];

            tableHTML += `
                <tr>
                    <td>${workout.day}</td>
                    <td><strong>${workout.target}</strong></td>
                    <td>${workout.setsReps}</td>
                    <td>${workout.notes}</td>
                </tr>
            `;

            // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
            // >>> ADDED: EXTRACT EXERCISES MENTIONED INSIDE NOTES <<<
            // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
            Object.keys(exerciseVideos).forEach(ex => {
                if (workout.notes.includes(ex)) {
                    exerciseList.add(ex);
                }
            });
        }

        const restDays = 7 - trainingPlan.length;
        if (restDays > 0) {
            tableHTML += `
                <tr>
                    <td>Rest Days (${restDays} days)</td>
                    <td>Recovery & Active Rest</td>
                    <td>N/A</td>
                    <td>Walk, stretch, and prioritize sleep.</td>
                </tr>
            `;
        }
    }

    tableHTML += '</tbody></table>';

    // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    // >>> ADDED: TUTORIAL LINKS SECTION UNDER TABLE <<<
    // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    tableHTML += `<h3>üé• Exercise Tutorial Links</h3><ul>`;
    exerciseList.forEach(exercise => {
        tableHTML += `<li><strong>${exercise}:</strong> <a href="${exerciseVideos[exercise]}" target="_blank">${exerciseVideos[exercise]}</a></li>`;
    });
    tableHTML += `</ul>`;

    // >>> END OF INSERTION <<<
    // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

    tableHTML += '</div>';

    tableHTML += `
        <div class="print-download-buttons">
            <button onclick="window.print()" style="background-color: #337ab7;">üñ®Ô∏è Print Workout</button>
            <button id="downloadPdfButton" style="background-color: #d9534f;">‚¨áÔ∏è Download PDF</button>
        </div>
    `;
    
    document.getElementById('workoutTableContainer').innerHTML = tableHTML;


    // (YOUR ORIGINAL PDF GENERATION CODE ‚Äî UNCHANGED)

});
</script>

</body>
</html>
